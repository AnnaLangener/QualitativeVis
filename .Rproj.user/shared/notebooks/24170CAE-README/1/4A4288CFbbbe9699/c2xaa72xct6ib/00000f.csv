"0","library(tidyverse)"
"0",""
"0","# This step is needed if we have not codes on all leveles"
"0","Source_Target_2$Level.3[is.na(Source_Target_2$Level.3)] <- Source_Target_2$Category[is.na(Source_Target_2$Level.3)]"
"0",""
"0","Source_Target_2$Level.2[is.na(Source_Target_2$Level.2)] <- Source_Target_2$Level.3[is.na(Source_Target_2$Level.2)]"
"0",""
"0","# ... if more levels are present"
"0",""
"0","#adapted from https://rpubs.com/droach/CPP526-codethrough"
"0",""
"0","Source_Target_Category <- Source_Target_2[,c(1,2)] %>%"
"0","  mutate(row = row_number()) %>%                                       "
"0","  pivot_longer(cols = -row, names_to = ""column"", values_to = ""source"") %>%"
"0","  mutate(column = match(column, names(.))) %>%   "
"0","  group_by(row) %>% "
"0","  mutate(target = lead(source, order_by = column)) %>% "
"0","  filter(!is.na(target)) %>%                           "
"0","  ungroup() "
"0",""
"0","Source_Target_Level3 <- Source_Target_2[,c(2,3)] %>%"
"0","  mutate(row = row_number()) %>%                                       "
"0","  pivot_longer(cols = -row, names_to = ""column"", values_to = ""source"") %>%"
"0","  mutate(column = match(column, names(.))) %>%   "
"0","  group_by(row) %>% "
"0","  mutate(target = lead(source, order_by = column)) %>% "
"0","  filter(!is.na(target)) %>%                           "
"0","  ungroup() "
"1","[1m[33mError[39m in `Source_Target_2[, c(2, 3)]`:[22m
[33m![39m Can't subset columns past the end.
[38;5;232m[36mâ„¹[38;5;232m Location 3 doesn't exist.
[36mâ„¹[38;5;232m There are only 2 columns.[39m
Backtrace:
[90m  1. [39m... %>% ungroup()
[90m 10. [39m[1m[94mtibble:::`[.tbl_df`([39m[22mSource_Target_2, , c(2, 3)[1m[94m)[39m[22m
"
